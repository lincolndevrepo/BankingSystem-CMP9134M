!function (e, r) { "object" == typeof exports && "undefined" != typeof module ? module.exports = r() : "function" == typeof define && define.amd ? define(r) : (e = "undefined" != typeof globalThis ? globalThis : e || self).Pristine = r() }(this, function () { "use strict"; var e = { en: { required: "This field is required", email: "This field requires a valid e-mail address", number: "This field requires a number", integer: "This field requires an integer value", url: "This field requires a valid website URL", tel: "This field requires a valid telephone number", maxlength: "This fields length must be < ${1}", minlength: "This fields length must be > ${1}", min: "Minimum value for this field is ${1}", max: "Maximum value for this field is ${1}", pattern: "Please match the requested format", equals: "The two fields do not match", default: "Please enter a correct value" } }; function r(e, r) { for (; (e = e.parentElement) && !e.classList.contains(r);); return e } function t(e) { var r = arguments; return this.replace(/\${([^{}]*)}/g, function (e, t) { return r[t] }) } function n(e) { return e.pristine.self.form.querySelectorAll('input[name="' + e.getAttribute("name") + '"]:checked').length } var i = { classTo: "form-group", errorClass: "has-error", successClass: "has-success", errorTextParent: "form-group-parent", errorTextTag: "label", errorTextClass: "text-help" }, s = "error", a = ["required", "min", "max", "minlength", "maxlength", "pattern"], o = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/, l = /-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/, u = "en", f = {}, c = function e(r, t) { t.name = r, void 0 === t.priority && (t.priority = 1), f[r] = t }; function p(n, o, c) { var p, m, d, h = this; function v(e, r, t, n) { var i = f[t]; if (i && (e.push(i), n)) { var s = "pattern" === t ? [n] : n.split(","); s.unshift(null), r[t] = s } } function g(r) { for (var n = [], i = !0, s = 0; r.validators[s]; s++) { var a = r.validators[s], o = r.params[a.name] ? r.params[a.name] : []; if (o[0] = r.input.value, !a.fn.apply(r.input, o) && (i = !1, "function" == typeof a.msg ? n.push(a.msg(r.input.value, o)) : "string" == typeof a.msg ? n.push(t.apply(a.msg, o)) : a.msg === Object(a.msg) && a.msg[u] ? n.push(t.apply(a.msg[u], o)) : r.messages[u] && r.messages[u][a.name] ? n.push(t.apply(r.messages[u][a.name], o)) : e[u] && e[u][a.name] ? n.push(t.apply(e[u][a.name], o)) : n.push(t.apply(e[u].default, o)), !0 === a.halt)) break } return r.errors = n, i } function y(e) { if (e.errorElements) return e.errorElements; var t = r(e.input, h.config.classTo), n = null, i = null; return (n = h.config.classTo === h.config.errorTextParent ? t : r(t, h.config.errorTextParent)) && !(i = n.querySelector("." + s)) && ((i = document.createElement(h.config.errorTextTag)).className = s + " " + h.config.errorTextClass, n.appendChild(i), i.pristineDisplay = i.style.display), e.errorElements = [t, i] } function b(e) { var r = y(e), t = r[0], n = r[1], i = e.input, s = "error-" + (i.id || Math.floor(new Date().valueOf() * Math.random())); t && (t.classList.remove(h.config.successClass), t.classList.add(h.config.errorClass), i.setAttribute("aria-describedby", s), i.setAttribute("aria-invalid", "true")), n && (n.setAttribute("id", s), n.setAttribute("role", "alert"), n.innerHTML = e.errors.join("<br/>"), n.style.display = n.pristineDisplay || "") } function $(e) { var r, t, n, i, s, a = (r = e, n = (t = y(r))[0], i = t[1], s = r.input, n && (n.classList.remove(h.config.errorClass), n.classList.remove(h.config.successClass), s.removeAttribute("aria-describedby"), s.removeAttribute("aria-invalid")), i && (i.removeAttribute("id"), i.removeAttribute("role"), i.innerHTML = "", i.style.display = "none"), t)[0]; a && a.classList.add(h.config.successClass) } return p = n, m = o, d = c, p.setAttribute("novalidate", "true"), h.form = p, h.config = function e(r, t) { for (var n in t) n in r || (r[n] = t[n]); return r }(m || {}, i), h.live = !1 !== d, h.fields = Array.from(p.querySelectorAll("input:not([type^=hidden]):not([type^=submit]), select, textarea")).map((function (e) { var r = [], t = {}, n = {}; return [].forEach.call(e.attributes, function (e) { if (/^data-pristine-/.test(e.name)) { var i = e.name.substr(14), s = i.match(l); if (null !== s) { var o = void 0 === s[1] ? "en" : s[1]; n.hasOwnProperty(o) || (n[o] = {}), n[o][i.slice(0, i.length - s[0].length)] = e.value; return } "type" === i && (i = e.value), v(r, t, i, e.value) } else ~a.indexOf(e.name) ? v(r, t, e.name, e.value) : "type" === e.name && v(r, t, e.value) }), r.sort(function (e, r) { return r.priority - e.priority }), h.live && e.addEventListener(~["radio", "checkbox"].indexOf(e.getAttribute("type")) ? "change" : "input", (function (e) { h.validate(e.target) }).bind(h)), e.pristine = { input: e, validators: r, params: t, messages: n, self: h } }).bind(h)), h.validate = function (e, r) { r = e && !0 === r || !0 === e; var t = h.fields; !0 !== e && !1 !== e && (e instanceof HTMLElement ? t = [e.pristine] : (e instanceof NodeList || e instanceof (window.$ || Array) || e instanceof Array) && (t = Array.from(e).map(function (e) { return e.pristine }))); for (var n = !0, i = 0; t[i]; i++) { var s = t[i]; g(s) ? r || $(s) : (n = !1, r || b(s)) } return n }, h.getErrors = function (e) { if (!e) { for (var r = [], t = 0; t < h.fields.length; t++) { var n = h.fields[t]; n.errors.length && r.push({ input: n.input, errors: n.errors }) } return r } return e.tagName && "select" === e.tagName.toLowerCase() ? e.pristine.errors : e.length ? e[0].pristine.errors : e.pristine.errors }, h.addValidator = function (e, r, t, n, i) { e instanceof HTMLElement ? (e.pristine.validators.push({ fn: r, msg: t, priority: n, halt: i }), e.pristine.validators.sort(function (e, r) { return r.priority - e.priority })) : console.warn("The parameter elem must be a dom element") }, h.addError = function (e, r) { (e = e.length ? e[0] : e).pristine.errors.push(r), b(e.pristine) }, h.reset = function () { for (var e = 0; h.fields[e]; e++)h.fields[e].errorElements = null; Array.from(h.form.querySelectorAll("." + s)).map(function (e) { e.parentNode.removeChild(e) }), Array.from(h.form.querySelectorAll("." + h.config.classTo)).map(function (e) { e.classList.remove(h.config.successClass), e.classList.remove(h.config.errorClass) }) }, h.destroy = function () { h.reset(), h.fields.forEach(function (e) { delete e.input.pristine }), h.fields = [] }, h.setGlobalConfig = function (e) { i = e }, h } return c("text", { fn: function e(r) { return !0 }, priority: 0 }), c("required", { fn: function e(r) { return "radio" === this.type || "checkbox" === this.type ? n(this) : void 0 !== r && "" !== r.trim() }, priority: 99, halt: !0 }), c("email", { fn: function e(r) { return !r || o.test(r) } }), c("number", { fn: function e(r) { return !r || !isNaN(parseFloat(r)) }, priority: 2 }), c("integer", { fn: function e(r) { return !r || /^\d+$/.test(r) } }), c("minlength", { fn: function e(r, t) { return !r || r.length >= parseInt(t) } }), c("maxlength", { fn: function e(r, t) { return !r || r.length <= parseInt(t) } }), c("min", { fn: function e(r, t) { return !r || ("checkbox" === this.type ? n(this) >= parseInt(t) : parseFloat(r) >= parseFloat(t)) } }), c("max", { fn: function e(r, t) { return !r || ("checkbox" === this.type ? n(this) <= parseInt(t) : parseFloat(r) <= parseFloat(t)) } }), c("pattern", { fn: function e(r, t) { var n = t.match(RegExp("^/(.*?)/([gimy]*)$")); return !r || RegExp(n[1], n[2]).test(r) } }), c("equals", { fn: function e(r, t) { var n = document.querySelector(t); return n && (!r && !n.value || n.value === r) } }), p.addValidator = function (e, r, t, n, i) { c(e, { fn: r, msg: t, priority: n, halt: i }) }, p.addMessages = function (r, t) { var n = e.hasOwnProperty(r) ? e[r] : e[r] = {}; Object.keys(t).forEach(function (e, r) { n[e] = t[e] }) }, p.setLocale = function (e) { u = e }, p });